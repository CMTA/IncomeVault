<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 5.0.0 (20220707.1540)
 -->
<!-- Title: UmlClassDiagram Pages: 1 -->
<svg width="1407pt" height="1073pt"
 viewBox="0.00 0.00 1406.68 1072.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1068.8)">
<title>UmlClassDiagram</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1068.8 1402.68,-1068.8 1402.68,4 -4,4"/>
<!-- 0 -->
<g id="node1" class="node">
<title>0</title>
<polygon fill="#f2f2f2" stroke="black" points="0,-0.5 0,-226.1 1398.68,-226.1 1398.68,-0.5 0,-0.5"/>
<text text-anchor="middle" x="699.34" y="-209.5" font-family="Times,serif" font-size="14.00">IncomeVault</text>
<text text-anchor="middle" x="699.34" y="-192.7" font-family="Times,serif" font-size="14.00">src/IncomeVault.sol</text>
<polyline fill="none" stroke="black" points="0,-184.5 1398.68,-184.5 "/>
<text text-anchor="start" x="8" y="-167.9" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="8" y="-151.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;__gap: uint256[50]</text>
<polyline fill="none" stroke="black" points="0,-142.9 1398.68,-142.9 "/>
<text text-anchor="start" x="8" y="-126.3" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="8" y="-109.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;__IncomeVault_init(admin: address, ERC20TokenPayment_: IERC20, cmtat_token: ICMTATSnapshot, ruleEngine_: IRuleEngine, authorizationEngineIrrevocable: IAuthorizationEngine, timeLimitToWithdraw_: uint256) &lt;&lt;onlyInitializing&gt;&gt;</text>
<text text-anchor="start" x="8" y="-92.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_msgSender(): (sender: address)</text>
<text text-anchor="start" x="8" y="-75.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_msgData(): bytes</text>
<text text-anchor="start" x="8" y="-59.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_contextSuffixLength(): uint256</text>
<text text-anchor="start" x="8" y="-42.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="8" y="-25.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(forwarderIrrevocable: address)</text>
<text text-anchor="start" x="8" y="-8.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;initialize(admin: address, ERC20TokenPayment_: IERC20, cmtat_token: ICMTATSnapshot, ruleEngine_: IRuleEngine, authorizationEngineIrrevocable: IAuthorizationEngine, timeLimitToWithdraw_: uint256) &lt;&lt;initializer&gt;&gt;</text>
</g>
<!-- 3 -->
<g id="node4" class="node">
<title>3</title>
<polygon fill="#f2f2f2" stroke="black" points="279.59,-296.7 279.59,-488.7 635.09,-488.7 635.09,-296.7 279.59,-296.7"/>
<text text-anchor="middle" x="457.34" y="-472.1" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="457.34" y="-455.3" font-family="Times,serif" font-size="14.00">IncomeVaultOpen</text>
<text text-anchor="middle" x="457.34" y="-438.5" font-family="Times,serif" font-size="14.00">src/public/IncomeVaultOpen.sol</text>
<polyline fill="none" stroke="black" points="279.59,-430.3 635.09,-430.3 "/>
<text text-anchor="start" x="287.59" y="-413.7" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="287.59" y="-396.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;__gap: uint256[50]</text>
<polyline fill="none" stroke="black" points="279.59,-388.7 635.09,-388.7 "/>
<text text-anchor="start" x="287.59" y="-372.1" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="287.59" y="-355.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;validateTime(time: uint256)</text>
<text text-anchor="start" x="287.59" y="-338.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;validateTimeBatch(times: uint256[])</text>
<text text-anchor="start" x="287.59" y="-321.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;claimDividend(time: uint256) &lt;&lt;nonReentrant&gt;&gt;</text>
<text text-anchor="start" x="287.59" y="-304.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;claimDividendBatch(times: uint256[]) &lt;&lt;nonReentrant&gt;&gt;</text>
</g>
<!-- 0&#45;&gt;3 -->
<g id="edge2" class="edge">
<title>0&#45;&gt;3</title>
<path fill="none" stroke="black" d="M601.61,-226.33C587.94,-241.99 573.87,-258.12 560.12,-273.88"/>
<polygon fill="none" stroke="black" points="552.1,-267.11 540.29,-296.62 567.92,-280.91 552.1,-267.11"/>
</g>
<!-- 4 -->
<g id="node5" class="node">
<title>4</title>
<polygon fill="#f2f2f2" stroke="black" points="652.61,-263.1 652.61,-522.3 1232.07,-522.3 1232.07,-263.1 652.61,-263.1"/>
<text text-anchor="middle" x="942.34" y="-505.7" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="942.34" y="-488.9" font-family="Times,serif" font-size="14.00">IncomeVaultRestricted</text>
<text text-anchor="middle" x="942.34" y="-472.1" font-family="Times,serif" font-size="14.00">src/public/IncomeVaultRestricted.sol</text>
<polyline fill="none" stroke="black" points="652.61,-463.9 1232.07,-463.9 "/>
<text text-anchor="start" x="660.61" y="-447.3" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="660.61" y="-430.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;__gap: uint256[50]</text>
<polyline fill="none" stroke="black" points="652.61,-422.3 1232.07,-422.3 "/>
<text text-anchor="start" x="660.61" y="-405.7" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="660.61" y="-388.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;__IncomeVaultRestricted_init_unchained(timeLimitToWithdraw_: uint256) &lt;&lt;onlyInitializing&gt;&gt;</text>
<text text-anchor="start" x="660.61" y="-372.1" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="660.61" y="-355.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;deposit(time: uint256, amount: uint256) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="660.61" y="-338.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;withdraw(time: uint256, amount: uint256, withdrawAddress: address) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="660.61" y="-321.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;withdrawAll(amount: uint256, withdrawAddress: address) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="660.61" y="-304.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;distributeDividend(addresses: address[], time: uint256) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="660.61" y="-288.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setStatusClaim(time: uint256, status: bool) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="660.61" y="-271.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setTimeLimitToWithdraw(timeLimitToWithdraw_: uint256) &lt;&lt;onlyRole&gt;&gt;</text>
</g>
<!-- 0&#45;&gt;4 -->
<g id="edge1" class="edge">
<title>0&#45;&gt;4</title>
<path fill="none" stroke="black" d="M797.48,-226.33C801.51,-230.93 805.58,-235.58 809.67,-240.25"/>
<polygon fill="none" stroke="black" points="801.82,-247.22 829.49,-262.87 817.62,-233.39 801.82,-247.22"/>
</g>
<!-- 1 -->
<g id="node2" class="node">
<title>1</title>
<polygon fill="#f2f2f2" stroke="black" points="230.21,-559.3 230.21,-818.5 1168.47,-818.5 1168.47,-559.3 230.21,-559.3"/>
<text text-anchor="middle" x="699.34" y="-801.9" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="699.34" y="-785.1" font-family="Times,serif" font-size="14.00">IncomeVaultInternal</text>
<text text-anchor="middle" x="699.34" y="-768.3" font-family="Times,serif" font-size="14.00">src/lib/IncomeVaultInternal.sol</text>
<polyline fill="none" stroke="black" points="230.21,-760.1 1168.47,-760.1 "/>
<text text-anchor="start" x="238.21" y="-743.5" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="238.21" y="-726.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;CMTAT_TOKEN: ICMTATSnapshot</text>
<text text-anchor="start" x="238.21" y="-709.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;ERC20TokenPayment: IERC20</text>
<text text-anchor="start" x="238.21" y="-693.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;claimedDividend: mapping(address=&gt;mapping(uint256=&gt;bool))</text>
<text text-anchor="start" x="238.21" y="-676.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;segregatedDividend: mapping(uint256=&gt;uint256)</text>
<text text-anchor="start" x="238.21" y="-659.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;segregatedClaim: mapping(uint256=&gt;bool)</text>
<text text-anchor="start" x="238.21" y="-642.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;timeLimitToWithdraw: uint256</text>
<polyline fill="none" stroke="black" points="230.21,-634.5 1168.47,-634.5 "/>
<text text-anchor="start" x="238.21" y="-617.9" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="238.21" y="-601.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_computeDividendBatch(time: uint256, tokenHolders: address[], tokenHoldersBalance: uint256[], tokenTotalSupply: uint256): (tokenHolderDividend: uint256[])</text>
<text text-anchor="start" x="238.21" y="-584.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_computeDividend(time: uint256, senderBalance: uint256, tokenTotalSupply: uint256): (tokenHolderDividend: uint256)</text>
<text text-anchor="start" x="238.21" y="-567.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_transferDividend(time: uint256, tokenHolder: address, tokenHolderDividend: uint256)</text>
</g>
<!-- 2 -->
<g id="node3" class="node">
<title>2</title>
<polygon fill="#f2f2f2" stroke="black" points="460.14,-855.5 460.14,-1064.3 938.53,-1064.3 938.53,-855.5 460.14,-855.5"/>
<text text-anchor="middle" x="699.34" y="-1047.7" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="699.34" y="-1030.9" font-family="Times,serif" font-size="14.00">IncomeVaultInvariantStorage</text>
<text text-anchor="middle" x="699.34" y="-1014.1" font-family="Times,serif" font-size="14.00">src/lib/IncomeVaultInvariantStorage.sol</text>
<polyline fill="none" stroke="black" points="460.14,-1005.9 938.53,-1005.9 "/>
<text text-anchor="start" x="468.14" y="-989.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="468.14" y="-972.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;INCOME_VAULT_OPERATOR_ROLE: bytes32</text>
<text text-anchor="start" x="468.14" y="-955.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;INCOME_VAULT_DEPOSIT_ROLE: bytes32</text>
<text text-anchor="start" x="468.14" y="-938.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;INCOME_VAULT_DISTRIBUTE_ROLE: bytes32</text>
<text text-anchor="start" x="468.14" y="-922.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;INCOME_VAULT_WITHDRAW_ROLE: bytes32</text>
<polyline fill="none" stroke="black" points="460.14,-913.9 938.53,-913.9 "/>
<text text-anchor="start" x="468.14" y="-897.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="468.14" y="-880.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; newDeposit(time: uint256, sender: address, dividend: uint256)</text>
<text text-anchor="start" x="468.14" y="-863.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; DividendClaimed(time: uint256, sender: address, dividend: uint256)</text>
</g>
<!-- 1&#45;&gt;2 -->
<g id="edge3" class="edge">
<title>1&#45;&gt;2</title>
<path fill="none" stroke="black" d="M699.34,-818.88C699.34,-820.99 699.34,-823.1 699.34,-825.21"/>
<polygon fill="none" stroke="black" points="688.84,-825.47 699.34,-855.47 709.84,-825.47 688.84,-825.47"/>
</g>
<!-- 3&#45;&gt;1 -->
<g id="edge4" class="edge">
<title>3&#45;&gt;1</title>
<path fill="none" stroke="black" d="M535.58,-488.81C547.96,-503.87 561.03,-519.76 574.17,-535.73"/>
<polygon fill="none" stroke="black" points="566.23,-542.61 593.4,-559.1 582.45,-529.26 566.23,-542.61"/>
</g>
<!-- 4&#45;&gt;1 -->
<g id="edge5" class="edge">
<title>4&#45;&gt;1</title>
<path fill="none" stroke="black" d="M836.11,-522.31C832.4,-526.8 828.68,-531.31 824.95,-535.82"/>
<polygon fill="none" stroke="black" points="816.71,-529.31 805.7,-559.13 832.9,-542.69 816.71,-529.31"/>
</g>
</g>
</svg>
